<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Novedades â€“ BelÃ©n Montero GutiÃ©rrez</title>
  <link rel="stylesheet" href="style.css">
  <!-- SDK de PayPal -->
  <script src="https://www.paypal.com/sdk/js?client-id=AbRIHOuvX_nFEWN84U7vJ4-5G_zImE7uM4sJ04D_Kz-N2Ida-nbBgd6kQFqczK0VLMI9F4a4k1Lm_ll5&currency=EUR"></script>
</head>
<body>
  <h1>NOVEDADES</h1>

  <section>
    <h2>Â¡Noticias frescas! ğŸ“¢</h2>
    <p>Â¡AtenciÃ³n querido lector! Esto te interesa. Quiero compartir contigo que he terminado de escribir mi primera trilogÃ­a. Â¿No es genial? Yâ€¦ ya sabes lo que eso significa. MÃ¡s pronto que tarde podrÃ¡s tener en tus manos el ejemplar, pero eso no es todo, voy a librarte de la larga espera entre novela y novela porqueâ€¦ Â¡Van las tres juntas en el mismo libro! Por ahora no puedo decir mucho mÃ¡s, pero no me pierdas de vista. Â¡No es la Ãºnica novedad que tengo entre manos!</p>
  </section>

  <div class="contenedor-pack">
    <div class="texto-pack">
      <p><strong>RECUERDA QUEâ€¦</strong><br>
      Si vas a la playa no te olvides<br>
      la toalla, ni tampoco mis novelas â¤ï¸</p>

      <h2>PACK ROMÃNTICO</h2>

      <!-- Imagen justo debajo del tÃ­tulo -->
      <div class="imagen-pack">
        <picture>
          <!-- Imagen para mÃ³vil -->
          <source srcset="imagenes/Pack.jpg" media="(max-width: 600px)">
          <!-- Imagen por defecto (escritorio/tablet) -->
          <img src="imagenes/Pack.jpg" alt="Imagen del Pack RomÃ¡ntico">
        </picture>
      </div>

      <ul>
        <li>Novelas firmadas</li>
        <li>MarcapÃ¡ginas de regalo</li>
        <li>Colgante corazÃ³n</li>
        <li>Caja misteriosa</li>
      </ul>
      <p><strong>PVP 30â‚¬</strong></p>

      <!-- BotÃ³n de aÃ±adir al carrito -->
      <button onclick="agregarAlCarrito('Pack RomÃ¡ntico', 30.00)">ğŸ›’ AÃ±adir al carrito</button>
    </div>
  </div>

  <!-- ğŸ›’ Carrito -->
  <section class="carrito">
    <h2>ğŸ›’ Tu carrito</h2>
    <ul id="carrito-lista"></ul>
    <p>Total: <span id="total">0</span> â‚¬</p>

    <!-- BotÃ³n PayPal -->
    <div id="paypal-button-container"></div>
  </section>

  <footer>
    <a href="index.html">â¬…ï¸ Volver a la pÃ¡gina principal</a>
  </footer>

  <script type="module">
    let carrito = [];
    let total = 0;

    window.agregarAlCarrito = function(nombre, precio) {
      carrito.push({ nombre, precio });
      total += precio;
      renderCarrito();
    };

    function renderCarrito() {
      const lista = document.getElementById("carrito-lista");
      lista.innerHTML = "";

      if (carrito.length > 0) {
        const li = document.createElement("li");
        li.innerHTML = `<button onclick="vaciarCarrito()">ğŸ—‘ï¸ Vaciar carrito</button>`;
        lista.appendChild(li);

        carrito.forEach(item => {
          const liItem = document.createElement("li");
          liItem.textContent = `${item.nombre} - ${item.precio.toFixed(2)} â‚¬`;
          lista.appendChild(liItem);
        });
      }

      document.getElementById("total").textContent = total.toFixed(2);
    }

    window.vaciarCarrito = function() {
      carrito = [];
      total = 0;
      renderCarrito();
    };

    // Inicializar PayPal
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{ amount: { value: total.toFixed(2) } }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert("âœ… Pago completado por " + details.payer.name.given_name);
          carrito = [];
          total = 0;
          renderCarrito();
        });
      },
      onError: function(err) {
        console.error("âŒ Error en el pago:", err);
        alert("Hubo un problema con el pago.");
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
