<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Novedades – Belén Montero Gutiérrez</title>
  <link rel="stylesheet" href="style.css">
  <!-- SDK de PayPal -->
  <script src="https://www.paypal.com/sdk/js?client-id=AbRIHOuvX_nFEWN84U7vJ4-5G_zImE7uM4sJ04D_Kz-N2Ida-nbBgd6kQFqczK0VLMI9F4a4k1Lm_ll5&currency=EUR"></script>
</head>
<body>
  <h1>NOVEDADES</h1>

  <section>
    <h2>¡Noticias frescas! 📢</h2>
    <p>¡Atención querido lector! Esto te interesa. Quiero compartir contigo que he terminado de escribir mi primera trilogía. ¿No es genial? Y… ya sabes lo que eso significa. Más pronto que tarde podrás tener en tus manos el ejemplar, pero eso no es todo, voy a librarte de la larga espera entre novela y novela porque… ¡Van las tres juntas en el mismo libro! Por ahora no puedo decir mucho más, pero no me pierdas de vista. ¡No es la única novedad que tengo entre manos!</p>
  </section>

  <div class="contenedor-pack">
    <div class="texto-pack">
      <p><strong>RECUERDA QUE…</strong><br>
      Si vas a la playa no te olvides<br>
      la toalla, ni tampoco mis novelas ❤️</p>

      <h2>PACK ROMÁNTICO</h2>

      <!-- Imagen justo debajo del título -->
      <div class="imagen-pack">
        <picture>
          <!-- Imagen para móvil -->
          <source srcset="imagenes/Pack.jpg" media="(max-width: 600px)">
          <!-- Imagen por defecto (escritorio/tablet) -->
          <img src="imagenes/Pack.jpg" alt="Imagen del Pack Romántico">
        </picture>
      </div>

      <ul>
        <li>Novelas firmadas</li>
        <li>Marcapáginas de regalo</li>
        <li>Colgante corazón</li>
        <li>Caja misteriosa</li>
      </ul>
      <p><strong>PVP 30€</strong></p>

      <!-- Botón de añadir al carrito -->
      <button onclick="agregarAlCarrito('Pack Romántico', 30.00)">🛒 Añadir al carrito</button>
    </div>
  </div>

  <!-- 🛒 Carrito -->
  <section class="carrito">
    <h2>🛒 Tu carrito</h2>
    <ul id="carrito-lista"></ul>
    <p>Total: <span id="total">0</span> €</p>

    <!-- Botón PayPal -->
    <div id="paypal-button-container"></div>
  </section>

  <footer>
    <a href="index.html">⬅️ Volver a la página principal</a>
  </footer>

  <script type="module">
    let carrito = [];
    let total = 0;

    window.agregarAlCarrito = function(nombre, precio) {
      carrito.push({ nombre, precio });
      total += precio;
      renderCarrito();
    };

    function renderCarrito() {
      const lista = document.getElementById("carrito-lista");
      lista.innerHTML = "";

      if (carrito.length > 0) {
        const li = document.createElement("li");
        li.innerHTML = `<button onclick="vaciarCarrito()">🗑️ Vaciar carrito</button>`;
        lista.appendChild(li);

        carrito.forEach(item => {
          const liItem = document.createElement("li");
          liItem.textContent = `${item.nombre} - ${item.precio.toFixed(2)} €`;
          lista.appendChild(liItem);
        });
      }

      document.getElementById("total").textContent = total.toFixed(2);
    }

    window.vaciarCarrito = function() {
      carrito = [];
      total = 0;
      renderCarrito();
    };

    // Inicializar PayPal
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{ amount: { value: total.toFixed(2) } }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert("✅ Pago completado por " + details.payer.name.given_name);
          carrito = [];
          total = 0;
          renderCarrito();
        });
      },
      onError: function(err) {
        console.error("❌ Error en el pago:", err);
        alert("Hubo un problema con el pago.");
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
